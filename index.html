
<!DOCTYPE html>  <html lang="ko">  <head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">  
    <title>윤서짱</title>  
    <style>  
        /* (1) 기본 스타일 & 리셋 */
* {
  margin: 0; 
  padding: 0; 
  box-sizing: border-box;
}
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  text-align: center;
  /* 화면이 세로로 스크롤될 수 있도록 */
  min-height: 100vh; 
}

/* (2) 헤더: 전체 폭 차지 */
#header {
  background: linear-gradient(45deg, #ff9800, #ff5722);
  color: white;
  padding: 15px 0;
  font-size: 1.2rem;
  font-weight: bold;
  border-bottom: 5px solid #d84315;
  width: 100%;
}

/* (3) 게임 컨테이너: 가로로는 유연하게, 너무 크게는 제한 */
#game-container {
  width: 90%;        /* 화면 너비의 90% 사용 */
  max-width: 1200px; /* 너무 커지지 않도록 제한 */
  margin: 20px auto; /* 가운데 정렬 & 위아래 여백 */
  background: white;
  padding: 10px;
  border-radius: 10px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

/* (4) 게임 보드: 10칸 고정, 전체 폭 채움 */
#game-board {
  display: grid;
  grid-template-columns: repeat(10, 1fr); /* 10열 고정 */
  gap: 5px;
  width: 100%;
  padding: 10px 0;
  box-sizing: border-box;
}

/* (5) 숫자(사과) 칸: 정사각형 + 글자 크기 자동 확장 */
.apple {
  aspect-ratio: 1;                          /* 정사각형 유지 */
  background: orange;
  color: white;
  font-size: clamp(1rem, 2.5vw, 2rem);      /* 화면 크기에 따라 글자 크기 변화 */
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  user-select: none;
  transition: background 0.2s;
  visibility: visible;
}

.selected {
  background: red;
}

/* (6) 버튼 컨테이너 & 버튼 스타일 */
.btn-container {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 15px;
}

button {
  padding: 12px 20px;
  font-size: 1rem;
  cursor: pointer;
  border: none;
  border-radius: 5px;
  color: white;
}

#restart-btn {
  background: #007bff;
}
#pause-btn {
  background: #ff5722;
}
#resume-btn {
  background: #4caf50;
  display: none;
}

/* (7) 남은 시간 깜빡임 */
@keyframes blink {
  0% { color: red; }
  50% { color: white; }
  100% { color: red; }
}
#timer.blinking {
  animation: blink 1s infinite;
}
    </style>  
</head>  
<body>  <div id="header">  
    <h1>10점 만들기 by 윤서</h1>  
    <p>남은시간 [ <span id="timer">180초</span> ] 점수 [ <span id="score">0점</span> ]</p>  
</div>  <div id="game-container">  
    <div id="game-board"></div>  
    <div class="btn-container">  
        <button id="restart-btn">다시하기</button>  
        <button id="pause-btn">일시정지</button>  
        <button id="resume-btn">계속하기</button>  
    </div>  
</div> 

<script>
const ROWS = 10, COLS = 10, boardSize = ROWS * COLS; // 10x10 보드 설정
let selectedApples = [], apples = [], isDragging = false, score = 0;
let startIdx = null, endIdx = null, timer = 180, timerInterval, isPaused = false;
const sound = new Audio('sound_effect_url_here.mp3');

function createBoard() {
    clearInterval(timerInterval);
    document.getElementById("timer").textContent = "180초";
    document.getElementById("score").textContent = "0점";
    score = 0;
    isPaused = false;
    toggleButtons();

    const board = document.getElementById("game-board");
    board.innerHTML = "";
    apples = generateAdvancedSolvableNumbers();
    if (!apples) {
        alert('Failed to generate a valid board. Please try again.');
        return;
    }
    apples.forEach((value, index) => createApple(value, index));
    startTimer();
}

function generateAdvancedSolvableNumbers() {
    let attempts = 0;
    let validBoard = false;
    let numbers;

    while (!validBoard && attempts < 100) {
        numbers = [];
        for (let i = 1; i <= 9; i++) {
            numbers.push(i, 10 - i);
        }
        shuffle(numbers);
        if (validateBoard(numbers)) {
            validBoard = true;
        } else {
            attempts++;
        }
    }

    return validBoard ? numbers : null;
}

function validateBoard(numbers) {
    // Simplified validation logic for demonstration
    for (let i = 0; i < numbers.length; i += COLS) {
        let sum = 0;
        for (let j = 0; j < COLS; j++) {
            sum += numbers[i + j];
        }
        if (sum !== 55) return false; // Each row must sum to 55 (1+2+...+9+10)
    }
    return true;
}

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

function createApple(value, index) {
    const apple = document.createElement("div");
    apple.className = "apple";
    apple.textContent = value;
    apple.dataset.index = index;
    apple.addEventListener("touchstart", startSelection);
    apple.addEventListener("touchmove", selectApple);
    apple.addEventListener("touchend", endSelection);
    document.getElementById("game-board").appendChild(apple);
}

function startSelection(event) {
    event.preventDefault();
    if (isPaused) return;
    isDragging = true;
    selectedApples = [];
    startIdx = Number(event.target.dataset.index);
    selectApple(event);
}

function selectApple(event) {
    event.preventDefault();
    if (!isDragging || isPaused) return;
    const apple = document.elementFromPoint(event.touches[0].clientX, event.touches[0].clientY);
    if (!apple || !apple.classList.contains("apple")) return;
    const currentIndex = Number(apple.dataset.index);
    if (!selectedApples.includes(apple)) {
        endIdx = currentIndex;
        updateSelection();
    }
}

function updateSelection() {
    // Update visual selection on board
}

function endSelection() {
    isDragging = false;
    if (isPaused) return;
    let sum = selectedApples.reduce((acc, apple) => acc + Number(apple.textContent), 0);
    if (sum === 10) {
        selectedApples.forEach(apple => {
            apple.style.visibility = "hidden";
            sound.play();
        });
        score += selectedApples.length;
        document.getElementById("score").textContent = `${score}점`;
    }
    selectedApples.forEach(apple => apple.classList.remove("selected"));
}

function toggleButtons() {
    document.getElementById("resume-btn").style.display = isPaused ? "inline-block" : "none";
    document.getElementById("pause-btn").style.display = isPaused ? "none" : "inline-block";
}

function startTimer() {
    timerInterval = setInterval(() => {
        if (!isPaused) {
            timer--;
            document.getElementById("timer").textContent = `${timer}초`;
            if (timer <= 10) {
                document.getElementById("timer").classList.add("blinking");
            }
            if (timer <= 0) {
                clearInterval(timerInterval);
                endGame();
            }
        }
    }, 1000);
}

function endGame() {
    isPaused = true;
    document.getElementById("timer").classList.remove("blinking");
    alert("게임이 종료되었습니다! 최종 점수: " + score + "점");
    resetGame();
}

document.getElementById("restart-btn").addEventListener("click", createBoard);
document.getElementById("pause-btn").addEventListener("click", () => {
    isPaused = true;
    toggleButtons();
});
document.getElementById("resume-btn").addEventListener("click", () => {
    isPaused = false;
    toggleButtons();
});

createBoard();
</script>
</body>
</html>